!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("babylonjs"));else if("function"==typeof define&&define.amd)define(["babylonjs"],i);else{var s="object"==typeof exports?i(require("babylonjs")):i(t.BABYLON);for(var h in s)("object"==typeof exports?exports:t)[h]=s[h]}}(window,(function(t){return function(t){var i={};function s(h){if(i[h])return i[h].exports;var n=i[h]={i:h,l:!1,exports:{}};return t[h].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=i,s.d=function(t,i,h){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"h",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.h)return t;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(h,n,function(i){return t[i]}.bind(null,n));return h},s.n=function(t){var i=t&&t.h?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([function(i,s){i.exports=t},function(t,i,s){"use strict";s.r(i),s.d(i,"CharacterController",(function(){return n})),s.d(i,"CCSettings",(function(){return o}));var h=s(0),n=function(){function t(t,i,s,n,u){var o=this;void 0===u&&(u=!1),this.u=9.8,this.v=30,this.k=45,this.M=Math.PI*this.v/180,this.j=Math.PI*this.k/180,this.O=.25,this.g=0,this.C=h.Vector3.Zero(),this.F=new c,this.L=!0,this.R=h.Vector3.Zero(),this.S=!1,this.q=0,this.B=0,this.J=!1,this._=-1,this.T=!1,this.A=!1,this.D=null,this.G=h.Vector3.Zero(),this.H=!1,this.I=0,this.K=50,this.N=0,this.P=!1,this.U=!1,this.V=!1,this.W=0,this.X=0,this.Y=0,this.Z=1,this.$=!1,this.tt=!1,this.it=0,this.st=0,this.ht=10,this.nt=!0,this.et=!1,this.ut=new h.Ray(h.Vector3.Zero(),h.Vector3.One(),1),this.ct=h.Vector3.Zero(),this.ot=.5,this.rt=0,this.ft=!1,this.at=!1,this.lt=!1,this.setAvatar(t,u)||console.error("unable to set avatar"),this.vt=s;null!=n&&this.setActionData(n),this.at||null==this.bt||this.wt(this.bt),this.at,this.kt=i,this.nt=this.kt.checkCollisions,this.Mt=new e,this.dt=function(){o.pt()},this.jt=function(t){o.yt(t)},this.Ot=function(t){o.gt(t)}}return t.prototype.getScene=function(){return this.vt},t.prototype.setSlopeLimit=function(t,i){this.v=t,this.k=i,this.M=Math.PI*this.v/180,this.j=Math.PI*this.k/180},t.prototype.setStepOffset=function(t){this.O=t},t.prototype.setWalkSpeed=function(t){this.F.walk.xt=t},t.prototype.setRunSpeed=function(t){this.F.run.xt=t},t.prototype.setBackSpeed=function(t){this.F.walkBack.xt=t},t.prototype.setBackFastSpeed=function(t){this.F.walkBackFast.xt=t},t.prototype.setJumpSpeed=function(t){this.F.idleJump.xt=t,this.F.runJump.xt=t},t.prototype.setLeftSpeed=function(t){this.F.strafeLeft.xt=t},t.prototype.setLeftFastSpeed=function(t){this.F.strafeLeftFast.xt=t},t.prototype.setRightSpeed=function(t){this.F.strafeRight.xt=t},t.prototype.setRightFastSpeed=function(t){this.F.strafeLeftFast.xt=t},t.prototype.setTurnSpeed=function(t){this.F.turnLeft.xt=t*Math.PI/180,this.F.turnRight.xt=t*Math.PI/180},t.prototype.setTurnFastSpeed=function(t){this.F.turnLeftFast.xt=t*Math.PI/180,this.F.turnRightFast.xt=t*Math.PI/180},t.prototype.setGravity=function(t){this.u=t},t.prototype.setAnimationGroups=function(t){null!=this.D&&this.D.Ct&&this.D.Ft.stop(),this.at=!0,this.setActionData(t)},t.prototype.setAnimationRanges=function(t){this.at=!1,this.setActionData(t)},t.prototype.setActionData=function(t){for(var i,s=!1,n=0,e=Object.keys(this.F);n<e.length;n++){var c=e[n],o=this.F[c];o instanceof u&&(o.Ct=!1,null!=(i=t[o.Lt])&&(this.lt=!0,o.Ct=!0,i instanceof h.AnimationGroup?(o.Ft=i,o.Rt=o.Ft.name,s=!0):i instanceof Object?(i.ag&&(o.Ft=i.ag,s=!0),i.name&&(o.Rt=i.name),null!=i.loop&&(o.St=i.loop),i.rate&&(o.qt=i.rate),i.speed&&(o.xt=i.speed),i.key&&(o.xt=i.key),i.sound&&(o.xt=i.sound)):o.Rt=i))}return this.Bt(),this.D=null,s?"ag":"ar"},t.prototype.getActionMap=function(){for(var t={},i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];if(n instanceof u){var e={};this.at?e.ag=n.Ft:e.name=n.Rt,e.loop=n.St,e.rate=n.qt,e.speed=n.xt,e.key=n.Jt,e.sound=n._t,e.exists=n.Ct,t[n.Lt]=e}}return t},t.prototype.getSettings=function(){var t=new o;return t.cameraRotate=0==this.getMode(),t.cameraTarget=this.R.clone(),t.cameraElastic=this.L,t.gravity=this.u,t.keyboard=this.Tt,t.maxSlopeLimit=this.k,t.minSlopeLimit=this.v,t.noFirstPerson=this.S,t.stepOffset=this.O,t.turningOff=this.isTurningOff(),t},t.prototype.setSettings=function(t){this.setMode(t.cameraRotate?0:1),this.setCameraTarget(t.cameraTarget),this.setCameraElasticity(t.cameraElastic),this.setGravity(t.gravity),this.enableKeyBoard(t.keyboard),this.setSlopeLimit(t.minSlopeLimit,t.maxSlopeLimit),this.setNoFirstPerson(t.noFirstPerson),this.setStepOffset(t.stepOffset),this.setTurningOff(t.turningOff)},t.prototype.zt=function(t,i,s,h){(this.at||null!=this.bt)&&(null!=h&&(t.St=h),this.at?(null!=i&&(t.Ft=i,t.Ct=!0),null!=s&&t.Ct&&(t.qt=s,t.Ft.speedRatio=s)):(null!=i&&(t.Rt=i),null!=s&&(t.qt=s),null!=this.bt.getAnimationRange(t.Rt)?t.Ct=!0:t.Ct=!1))},t.prototype.enableBlending=function(t){if(this.at)for(var i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];if(n instanceof u&&n.Ct)for(var e=0,c=n.Ft.targetedAnimations;e<c.length;e++){var o=c[e];o.animation.enableBlending=!0,o.animation.blendingSpeed=t}}else this.bt.enableBlending(t)},t.prototype.disableBlending=function(){if(this.at)for(var t=0,i=Object.keys(this.F);t<i.length;t++){var s=i[t],h=this.F[s];if(h instanceof u&&h.Ct)for(var n=0,e=h.Ft.targetedAnimations;n<e.length;n++){e[n].animation.enableBlending=!1}}},t.prototype.setWalkAnim=function(t,i,s){this.zt(this.F.walk,t,i,s)},t.prototype.setRunAnim=function(t,i,s){this.zt(this.F.run,t,i,s)},t.prototype.setWalkBackAnim=function(t,i,s){this.zt(this.F.walkBack,t,i,s),this.At(this.F.walkBackFast,this.F.walkBack)},t.prototype.setWalkBackFastAnim=function(t,i,s){this.zt(this.F.walkBackFast,t,i,s)},t.prototype.setSlideBackAnim=function(t,i,s){this.zt(this.F.slideBack,t,i,s)},t.prototype.setIdleAnim=function(t,i,s){this.zt(this.F.idle,t,i,s)},t.prototype.setTurnRightAnim=function(t,i,s){this.zt(this.F.turnRight,t,i,s),this.At(this.F.turnRightFast,this.F.turnRight)},t.prototype.setTurnRightFastAnim=function(t,i,s){this.zt(this.F.turnRightFast,t,i,s)},t.prototype.setTurnLeftAnim=function(t,i,s){this.zt(this.F.turnLeft,t,i,s),this.At(this.F.turnLeftFast,this.F.turnLeft)},t.prototype.setTurnLeftFastAnim=function(t,i,s){this.zt(this.F.turnLeftFast,t,i,s)},t.prototype.setStrafeRightAnim=function(t,i,s){this.zt(this.F.strafeRight,t,i,s),this.At(this.F.strafeRightFast,this.F.strafeRight)},t.prototype.setStrafeRightFastAnim=function(t,i,s){this.zt(this.F.strafeRightFast,t,i,s)},t.prototype.setStrafeLeftAnim=function(t,i,s){this.zt(this.F.strafeLeft,t,i,s),this.At(this.F.strafeLeftFast,this.F.strafeLeft)},t.prototype.setStrafeLeftFastAnim=function(t,i,s){this.zt(this.F.strafeLeftFast,t,i,s)},t.prototype.setIdleJumpAnim=function(t,i,s){this.zt(this.F.idleJump,t,i,s)},t.prototype.setRunJumpAnim=function(t,i,s){this.zt(this.F.runJump,t,i,s)},t.prototype.setFallAnim=function(t,i,s){this.zt(this.F.fall,t,i,s)},t.prototype.setWalkKey=function(t){this.F.walk.Jt=t.toLowerCase()},t.prototype.setWalkBackKey=function(t){this.F.walkBack.Jt=t.toLowerCase()},t.prototype.setTurnLeftKey=function(t){this.F.turnLeft.Jt=t.toLowerCase()},t.prototype.setTurnRightKey=function(t){this.F.turnRight.Jt=t.toLowerCase()},t.prototype.setStrafeLeftKey=function(t){this.F.strafeLeft.Jt=t.toLowerCase()},t.prototype.setStrafeRightKey=function(t){this.F.strafeRight.Jt=t.toLowerCase()},t.prototype.setJumpKey=function(t){this.F.idleJump.Jt=t.toLowerCase()},t.prototype.setCameraElasticity=function(t){this.L=t},t.prototype.setCameraTarget=function(t){this.R.copyFrom(t)},t.prototype.cameraCollisionChanged=function(){this.nt=this.kt.checkCollisions},t.prototype.setNoFirstPerson=function(t){this.S=t},t.prototype.wt=function(t){for(var i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];n instanceof u&&(null!=t?null!=t.getAnimationRange(n.Lt)&&(n.Rt=n.Lt,n.Ct=!0,this.lt=!0):n.Ct=!1)}this.Bt()},t.prototype.Bt=function(){this.At(this.F.walkBackFast,this.F.walkBack),this.At(this.F.turnRightFast,this.F.turnRight),this.At(this.F.turnLeftFast,this.F.turnLeft),this.At(this.F.strafeRightFast,this.F.strafeRight),this.At(this.F.strafeLeftFast,this.F.strafeLeft)},t.prototype.At=function(t,i){t.Ct||i.Ct&&(t.Ct=!0,t.Ft=i.Ft,t.Rt=i.Rt,t.qt=2*i.qt)},t.prototype.setMode=function(t){this.q=t,this.B=t},t.prototype.getMode=function(){return this.q},t.prototype.setTurningOff=function(t){this.tt=t},t.prototype.isTurningOff=function(){return this.tt},t.prototype.Dt=function(t){var i=t.getWorldMatrix(),s=h.Vector3.FromFloatArray(i.m,0),n=h.Vector3.FromFloatArray(i.m,4),e=h.Vector3.FromFloatArray(i.m,8),u=h.Vector3.Cross(s,n);h.Vector3.Dot(u,e)<0?(this.J=!0,this._=1):(this.J=!1,this._=-1)},t.prototype.setFaceForward=function(t){this.Et=t,this.J?(this.Gt=t?Math.PI/2:3*Math.PI/2,this.Ht=t?1:-1):(this.Gt=t?3*Math.PI/2:Math.PI/2,this.Ht=t?-1:1)},t.prototype.isFaceForward=function(){return this.Et},t.prototype.checkAGs=function(t){for(var i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];n instanceof u&&(null!=t[n.Rt]&&(n.Ft=t[n.Rt],n.Ct=!0))}},t.prototype.start=function(){this.T||(this.T=!0,this.Mt.reset(),this.Y=0,this.it=.001,this.H=!1,this.It(),this.enableKeyBoard(!0),this.vt.registerBeforeRender(this.dt))},t.prototype.stop=function(){this.T&&(this.T=!1,this.vt.unregisterBeforeRender(this.dt),this.enableKeyBoard(!1),this.D=null)},t.prototype.pauseAnim=function(){this.A=!0},t.prototype.resumeAnim=function(){this.A=!1},t.prototype.Kt=function(){return h.Vector3.Dot(this.Nt.forward,this.Nt.position.subtract(this.kt.position))<0?1:-1},t.prototype.pt=function(){this.G.copyFrom(this.Nt.position);var t=null,i=this.vt.getEngine().getDeltaTime()/1e3;this.Mt.Pt&&!this.P?(this.H=!1,this.it=0,t=this.Qt(i)):this.anyMovement()||this.P?(this.H=!1,this.it=0,t=this.Ut(i)):this.P||(t=this.Vt(i)),!this.A&&this.lt&&null!=t&&this.D!==t&&(t.Ct&&(this.at?(null!=this.D&&this.D.Ct&&this.D.Ft.stop(),t.Ft.start(t.St,t.qt)):this.bt.beginAnimation(t.Rt,t.St,t.qt)),this.D=t),this.It()},t.prototype.Qt=function(t){var i=null;i=this.F.runJump,0===this.X&&(this.W=this.Nt.position.y),this.X=this.X+t;var s,n=0,e=0;if(1==this.q||this.tt||(this.Nt.rotation.y=this.Gt-this.kt.alpha),this.V||this.U?(this.V?n=this.F.run.xt*t:this.U&&(n=this.F.walk.xt*t),(s=this.Wt.clone()).y=0,(s=s.normalize()).scaleToRef(n,s),e=this.Xt(this.F.runJump.xt,t),s.y=e):(e=this.Xt(this.F.idleJump.xt,t),s=new h.Vector3(0,e,0),i=this.F.idleJump),this.Nt.moveWithCollisions(s),e<0)if(this.Nt.position.y>this.G.y||this.Nt.position.y===this.G.y&&s.length()>.001)this.Yt();else if(this.Nt.position.y<this.W){var u=this.Nt.position.subtract(this.G);this.Zt(u,s,.001)?i=this.F.fall:this.$t(u)<=this.M&&this.Yt()}return i},t.prototype.Xt=function(t,i){return(t-this.u*this.X)*i-.5*this.u*i*i},t.prototype.Yt=function(){this.Mt.Pt=!1,this.X=0,this.U=!1,this.V=!1},t.prototype.Zt=function(t,i,s){return Math.abs(t.x-i.x)<s&&Math.abs(t.y-i.y)<s&&Math.abs(t.z-i.z)<s},t.prototype.$t=function(t){return Math.atan(Math.abs(t.y/Math.sqrt(t.x*t.x+t.z*t.z)))},t.prototype.Ut=function(t){var i=this.Y*this.u;this.I=i*t+this.u*t*t/2,this.Y=this.Y+t;var s=!1,h=null;if(this.P)this.Wt.y=-this.I,s=!0;else{this.U=!1,this.V=!1;var n=void 0,e=0;switch(!0){case this.Mt.ti:n=this._*this.Kt(),e=this.F.strafeLeft.xt*t,this.Mt.ii?(e=this.F.strafeLeftFast.xt*t,h=-this.Ht*n>0?this.F.strafeLeftFast:this.F.strafeRightFast):h=-this.Ht*n>0?this.F.strafeLeft:this.F.strafeRight,this.Wt=this.Nt.calcMovePOV(n*e,-this.I,0),s=!0;break;case this.Mt.si:n=-this._*this.Kt(),e=this.F.strafeRight.xt*t,this.Mt.ii?(e=this.F.strafeRightFast.xt*t,h=-this.Ht*n>0?this.F.strafeLeftFast:this.F.strafeRightFast):h=-this.Ht*n>0?this.F.strafeLeft:this.F.strafeRight,this.Wt=this.Nt.calcMovePOV(n*e,-this.I,0),s=!0;break;case this.Mt.hi||this.tt&&0==this.q:this.Mt.ii?(this.V=!0,e=this.F.run.xt*t,h=this.F.run):(this.U=!0,e=this.F.walk.xt*t,h=this.F.walk),this.Wt=this.Nt.calcMovePOV(0,-this.I,this.Ht*e),s=!0;break;case this.Mt.ni:e=this.F.walkBack.xt*t,this.Mt.ii?(e=this.F.walkBackFast.xt*t,h=this.F.walkBackFast):h=this.F.walkBack,this.Wt=this.Nt.calcMovePOV(0,-this.I,-this.Ht*e),s=!0}}if((!this.tt||0!=this.q)&&!this.Mt.ti&&!this.Mt.si&&(this.Mt.ei||this.Mt.ui)){var u=this.F.turnLeft.xt*t;if(this.Mt.ii&&(u*=2),1==this.q){this.$||(this.Z=-this.Ht*this.Kt(),this.J&&(this.Z=-this.Z),this.$=!0);var c=this.Z;this.Mt.ei?this.Mt.hi||(this.Mt.ni?c=-this.Z:h=this.Z>0?this.F.turnRight:this.F.turnLeft):this.Mt.hi?c=-this.Z:this.Mt.ni||(c=-this.Z,h=this.Z>0?this.F.turnLeft:this.F.turnRight),this.Nt.rotation.y=this.Nt.rotation.y+u*c}else{c=1;this.Mt.ei?(this.Mt.ni&&(c=-1),s||(h=this.F.turnLeft)):(this.Mt.hi&&(c=-1),s||(c=-1,h=this.F.turnRight)),this.kt.alpha=this.kt.alpha+u*c}}if(1!=this.q)if(this.tt)switch(!0){case this.Mt.hi&&this.Mt.ui:this.Nt.rotation.y=this.Gt-this.kt.alpha+Math.PI/4;break;case this.Mt.hi&&this.Mt.ei:this.Nt.rotation.y=this.Gt-this.kt.alpha-Math.PI/4;break;case this.Mt.ni&&this.Mt.ui:this.Nt.rotation.y=this.Gt-this.kt.alpha+3*Math.PI/4;break;case this.Mt.ni&&this.Mt.ei:this.Nt.rotation.y=this.Gt-this.kt.alpha-3*Math.PI/4;break;case this.Mt.hi:this.Nt.rotation.y=this.Gt-this.kt.alpha;break;case this.Mt.ni:this.Nt.rotation.y=this.Gt-this.kt.alpha+Math.PI;break;case this.Mt.ui:this.Nt.rotation.y=this.Gt-this.kt.alpha+Math.PI/2;break;case this.Mt.ei:this.Nt.rotation.y=this.Gt-this.kt.alpha-Math.PI/2}else this.Nt.rotation.y=this.Gt-this.kt.alpha;if(s&&this.Wt.length()>.001)if(this.Nt.moveWithCollisions(this.Wt),this.Nt.position.y>this.G.y){var o=this.Nt.position.subtract(this.G),r=this.$t(o);r>=this.j?this.O>0?(0==this.g&&this.C.copyFrom(this.G),this.g=this.g+(this.Nt.position.y-this.G.y),this.g>this.O&&(this.g=0,this.Nt.position.copyFrom(this.C),this.ci())):(this.Nt.position.copyFrom(this.G),this.ci()):(this.g=0,r>this.M?(this.N=0,this.P=!1):this.ci())}else if(this.Nt.position.y<this.G.y){o=this.Nt.position.subtract(this.G);this.Zt(o,this.Wt,.001)?(this.P=!0,this.N++,this.N>this.K&&(h=this.F.fall)):this.$t(o)<=this.M?this.ci():(this.N=0,this.P=!1)}else this.ci();return h},t.prototype.ci=function(){this.Y=0,this.N=0,this.P=!1},t.prototype.Vt=function(t){if(this.H)return this.F.idle;this.U=!1,this.V=!1,this.Y=0;var i=this.F.idle;if(this.N=0,0===t)this.I=5;else{var s=this.it*this.u;this.I=s*t+this.u*t*t/2,this.it=this.it+t}if(this.I<.01)return i;var n=new h.Vector3(0,-this.I,0);if(1==this.q||this.tt||(this.Nt.rotation.y=this.Gt-this.kt.alpha),this.Nt.moveWithCollisions(n),this.Nt.position.y>this.G.y||this.Nt.position.y===this.G.y)this.oi();else if(this.Nt.position.y<this.G.y){var e=this.Nt.position.subtract(this.G);this.Zt(e,n,.001)||(this.$t(e)<=this.M?(this.oi(),this.Nt.position.copyFrom(this.G)):(this.ri(),i=this.F.slideBack))}return i},t.prototype.oi=function(){this.st++,this.st>this.ht&&(this.H=!0,this.it=0)},t.prototype.ri=function(){this.H=!1,this.st=0},t.prototype.It=function(){0==this.g&&this.Nt.position.addToRef(this.R,this.kt.target),this.kt.radius>this.kt.lowerRadiusLimit&&this.L&&this.fi(),this.kt.radius<=this.kt.lowerRadiusLimit?this.S||this.et||(this.Nt.visibility=0,this.kt.checkCollisions=!1,this.B=this.q,this.q=0,this.et=!0):(this.et=!1,this.q=this.B,this.Nt.visibility=1,this.kt.checkCollisions=this.nt)},t.prototype.fi=function(){var t=this;this.kt.position.subtractToRef(this.kt.target,this.ct),this.ut.origin=this.kt.target,this.ut.length=this.ct.length(),this.ut.direction=this.ct.normalize();var i=this.vt.pickWithRay(this.ut,(function(i){return!(i==t.Nt||!i.checkCollisions)}),!0);if(i.hit)if(this.kt.checkCollisions){var s=this.kt.target.subtract(i.pickedPoint).normalize().scale(this.ot);i.pickedPoint.addToRef(s,this.kt.position)}else{var h=i.pickedPoint.subtract(this.kt.target).length();this.kt.radius=h-this.ot}},t.prototype.anyMovement=function(){return this.Mt.hi||this.Mt.ni||this.Mt.ei||this.Mt.ui||this.Mt.ti||this.Mt.si},t.prototype.gt=function(t){if(t.key&&!t.repeat){switch(t.key.toLowerCase()){case this.F.idleJump.Jt:this.Mt.Pt=!0;break;case"capslock":this.Mt.ii=!this.Mt.ii;break;case"shift":this.Mt.ii=!0;break;case"up":case"arrowup":case this.F.walk.Jt:this.Mt.hi=!0;break;case"left":case"arrowleft":case this.F.turnLeft.Jt:this.Mt.ei=!0;break;case"right":case"arrowright":case this.F.turnRight.Jt:this.Mt.ui=!0;break;case"down":case"arrowdown":case this.F.walkBack.Jt:this.Mt.ni=!0;break;case this.F.strafeLeft.Jt:this.Mt.ti=!0;break;case this.F.strafeRight.Jt:this.Mt.si=!0}this.ft=this.anyMovement()}},t.prototype.yt=function(t){if(t.key){switch(t.key.toLowerCase()){case"shift":this.Mt.ii=!1;break;case"up":case"arrowup":case this.F.walk.Jt:this.Mt.hi=!1;break;case"left":case"arrowleft":case this.F.turnLeft.Jt:this.Mt.ei=!1,this.$=!1;break;case"right":case"arrowright":case this.F.turnRight.Jt:this.Mt.ui=!1,this.$=!1;break;case"down":case"arrowdown":case this.F.walkBack.Jt:this.Mt.ni=!1;break;case this.F.strafeLeft.Jt:this.Mt.ti=!1;break;case this.F.strafeRight.Jt:this.Mt.si=!1}this.ft=this.anyMovement()}},t.prototype.enableKeyBoard=function(t){this.Tt=t;var i=this.vt.getEngine().getRenderingCanvas();t?(i.addEventListener("keyup",this.jt,!1),i.addEventListener("keydown",this.Ot,!1)):(i.removeEventListener("keyup",this.jt,!1),i.removeEventListener("keydown",this.Ot,!1))},t.prototype.walk=function(t){this.Mt.hi=t},t.prototype.walkBack=function(t){this.Mt.ni=t},t.prototype.walkBackFast=function(t){this.Mt.ni=t,this.Mt.ii=t},t.prototype.run=function(t){this.Mt.hi=t,this.Mt.ii=t},t.prototype.turnLeft=function(t){this.Mt.ei=t,t||(this.$=t)},t.prototype.turnLeftFast=function(t){this.Mt.ei=t,t||(this.$=t),this.Mt.ii=t},t.prototype.turnRight=function(t){this.Mt.ui=t,t||(this.$=t)},t.prototype.turnRightFast=function(t){this.Mt.ui=t,t||(this.$=t),this.Mt.ii=t},t.prototype.strafeLeft=function(t){this.Mt.ti=t},t.prototype.strafeLeftFast=function(t){this.Mt.ti=t,this.Mt.ii=t},t.prototype.strafeRight=function(t){this.Mt.si=t},t.prototype.strafeRightFast=function(t){this.Mt.si=t,this.Mt.ii=t},t.prototype.jump=function(){this.Mt.Pt=!0},t.prototype.idle=function(){this.Mt.reset()},t.prototype.isAg=function(){return this.at},t.prototype.ai=function(t){var i=this.li(t);if(i instanceof h.Mesh&&i.skeleton)return i.skeleton;var s=i.getChildMeshes(!1,(function(t){return!!(t instanceof h.Mesh&&t.skeleton)}));return s.length>0?s[0].skeleton:null},t.prototype.li=function(t){return null==t.parent?t:this.li(t.parent)},t.prototype.setAvatar=function(t,i){void 0===i&&(i=!1);var s=this.li(t);return s instanceof h.Mesh?(this.Nt=s,this.bt=this.ai(t),null!=this.bt&&this.bt.overrideMesh?this.at=!0:this.at=!1,this.F.reset(),this.at||null==this.bt||this.wt(this.bt),this.Dt(t),this.setFaceForward(i),!0):(console.error("Cannot move this mesh. The root node of the mesh provided is not a mesh"),!1)},t.prototype.getAvatar=function(){return this.Nt},t.prototype.setAvatarSkeleton=function(t){this.bt=t,null!=this.bt&&this.bt.overrideMesh?this.at=!0:this.at=!1,this.at||null==this.bt||this.wt(this.bt)},t.prototype.getSkeleton=function(){return this.bt},t}(),e=function(){function t(){this.hi=!1,this.ni=!1,this.ui=!1,this.ei=!1,this.si=!1,this.ti=!1,this.Pt=!1,this.ii=!1,this.reset()}return t.prototype.reset=function(){this.hi=!1,this.ni=!1,this.ui=!1,this.ei=!1,this.si=!1,this.ti=!1,this.Pt=!1,this.ii=!1},t}(),u=function(){function t(t,i,s){void 0===i&&(i=1),this.Rt="",this.St=!0,this.qt=1,this.Ct=!1,this.Lt=t,this.xt=i,this.vi=i,this.Jt=s,this.bi=s}return t.prototype.reset=function(){this.Rt="",this.xt=this.vi,this.Jt=this.bi,this.St=!0,this.qt=1,this._t="",this.Ct=!1},t}(),c=function(){function t(){this.walk=new u("walk",3,"w"),this.walkBack=new u("walkBack",1.5,"s"),this.walkBackFast=new u("walkBackFast",3,"na"),this.idle=new u("idle",0,"na"),this.idleJump=new u("idleJump",6," "),this.run=new u("run",6,"na"),this.runJump=new u("runJump",6,"na"),this.fall=new u("fall",0,"na"),this.turnLeft=new u("turnLeft",Math.PI/8,"a"),this.turnLeftFast=new u("turnLeftFast",Math.PI/4,"na"),this.turnRight=new u("turnRight",Math.PI/8,"d"),this.turnRightFast=new u("turnRightFast",Math.PI/4,"na"),this.strafeLeft=new u("strafeLeft",1.5,"q"),this.strafeLeftFast=new u("strafeLeftFast",3,"na"),this.strafeRight=new u("strafeRight",1.5,"e"),this.strafeRightFast=new u("strafeRightFast",3,"na"),this.slideBack=new u("slideBack",0,"na")}return t.prototype.reset=function(){for(var t=0,i=Object.keys(this);t<i.length;t++){var s=this[i[t]];s instanceof u&&s.reset()}},t}(),o=function(){this.cameraElastic=!0,this.cameraTarget=h.Vector3.Zero(),this.noFirstPerson=!1,this.turningOff=!0,this.cameraRotate=!0,this.keyboard=!0}}])}));
//# sourceMappingURL=CharacterController.js.map