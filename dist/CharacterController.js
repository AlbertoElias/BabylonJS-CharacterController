!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("babylonjs"));else if("function"==typeof define&&define.amd)define(["babylonjs"],i);else{var s="object"==typeof exports?i(require("babylonjs")):i(t.BABYLON);for(var h in s)("object"==typeof exports?exports:t)[h]=s[h]}}(window,(function(t){return function(t){var i={};function s(h){if(i[h])return i[h].exports;var n=i[h]={i:h,l:!1,exports:{}};return t[h].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=i,s.d=function(t,i,h){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"h",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.h)return t;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(h,n,function(i){return t[i]}.bind(null,n));return h},s.n=function(t){var i=t&&t.h?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=1)}([function(i,s){i.exports=t},function(t,i,s){"use strict";s.r(i),s.d(i,"CharacterController",(function(){return n})),s.d(i,"ActionData",(function(){return u})),s.d(i,"ActionMap",(function(){return c})),s.d(i,"CCSettings",(function(){return o}));var h=s(0),n=function(){function t(t,i,s,n,u){var o=this;void 0===u&&(u=!1),this.u=9.8,this.v=30,this.k=45,this.M=Math.PI*this.v/180,this.j=Math.PI*this.k/180,this.O=.25,this.g=0,this.C=h.Vector3.Zero(),this.F=new c,this.L=!0,this.R=h.Vector3.Zero(),this.S=!1,this.q=0,this.B=0,this.A=!1,this.J=-1,this._=!1,this.D=!1,this.T=null,this.G=h.Vector3.Zero(),this.H=!1,this.I=0,this.K=50,this.N=0,this.P=!1,this.U=!1,this.V=!1,this.W=0,this.X=0,this.Y=0,this.Z=1,this.$=!1,this.tt=!1,this.it=0,this.st=0,this.ht=10,this.nt=!0,this.et=!1,this.ut=new h.Ray(h.Vector3.Zero(),h.Vector3.One(),1),this.ct=h.Vector3.Zero(),this.ot=.5,this.rt=0,this.ft=!1,this.at=!1,this.lt=!1,this.setAvatar(t,u)||console.error("unable to set avatar"),this.vt=s;null!=n&&this.setActionMap(n),this.at||null==this.bt||this.wt(this.bt),this.at,this.kt=i,this.nt=this.kt.checkCollisions,this.Mt=new e,this.dt=function(){o.pt()},this.jt=function(t){o.yt(t)},this.Ot=function(t){o.gt(t)}}return t.prototype.getScene=function(){return this.vt},t.prototype.setSlopeLimit=function(t,i){this.v=t,this.k=i,this.M=Math.PI*this.v/180,this.j=Math.PI*this.k/180},t.prototype.setStepOffset=function(t){this.O=t},t.prototype.setWalkSpeed=function(t){this.F.walk.speed=t},t.prototype.setRunSpeed=function(t){this.F.run.speed=t},t.prototype.setBackSpeed=function(t){this.F.walkBack.speed=t},t.prototype.setBackFastSpeed=function(t){this.F.walkBackFast.speed=t},t.prototype.setJumpSpeed=function(t){this.F.idleJump.speed=t,this.F.runJump.speed=t},t.prototype.setLeftSpeed=function(t){this.F.strafeLeft.speed=t},t.prototype.setLeftFastSpeed=function(t){this.F.strafeLeftFast.speed=t},t.prototype.setRightSpeed=function(t){this.F.strafeRight.speed=t},t.prototype.setRightFastSpeed=function(t){this.F.strafeLeftFast.speed=t},t.prototype.setTurnSpeed=function(t){this.F.turnLeft.speed=t*Math.PI/180,this.F.turnRight.speed=t*Math.PI/180},t.prototype.setTurnFastSpeed=function(t){this.F.turnLeftFast.speed=t*Math.PI/180,this.F.turnRightFast.speed=t*Math.PI/180},t.prototype.setGravity=function(t){this.u=t},t.prototype.setAnimationGroups=function(t){null!=this.T&&this.T.exist&&this.T.ag.stop(),this.at=!0,this.setActionMap(t)},t.prototype.setAnimationRanges=function(t){this.at=!1,this.setActionMap(t)},t.prototype.setActionMap=function(t){for(var i,s=!1,n=0,e=Object.keys(this.F);n<e.length;n++){var c=e[n],o=this.F[c];o instanceof u&&(i=t[o.id],o.exist=!1,null!=i&&i.exist&&(this.lt=!0,o.exist=!0,i instanceof h.AnimationGroup?(o.ag=i,o.name=o.ag.name,s=!0):i instanceof Object?(i.ag&&(o.ag=i.ag,s=!0),i.name&&(o.name=i.name),null!=i.loop&&(o.loop=i.loop),i.rate&&(o.rate=i.rate),i.speed&&(o.speed=i.speed),i.sound&&(o.sound=i.sound)):o.name=i))}return console.log(this.F),this.xt(),this.T=null,s?"ag":"ar"},t.prototype.getActionMap=function(){for(var t=new c,i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];if(n instanceof u&&n.exist){var e=t[n.id];e.ag=n.ag,e.name=n.name,e.loop=n.loop,e.rate=n.rate,e.speed=n.speed,e.key=n.key,e.sound=n.sound,e.exist=n.exist}}return t},t.prototype.getSettings=function(){var t=new o;return t.faceForward=this.isFaceForward(),t.topDown=1==this.getMode(),t.turningOff=this.isTurningOff(),t.cameraTarget=this.R.clone(),t.cameraElastic=this.L,t.gravity=this.u,t.keyboard=this.Ct,t.maxSlopeLimit=this.k,t.minSlopeLimit=this.v,t.noFirstPerson=this.S,t.stepOffset=this.O,t},t.prototype.setSettings=function(t){this.setFaceForward(t.faceForward),this.setMode(t.topDown?1:0),this.setTurningOff(t.turningOff),this.setCameraTarget(t.cameraTarget),this.setCameraElasticity(t.cameraElastic),this.setGravity(t.gravity),this.enableKeyBoard(t.keyboard),this.setSlopeLimit(t.minSlopeLimit,t.maxSlopeLimit),this.setNoFirstPerson(t.noFirstPerson),this.setStepOffset(t.stepOffset)},t.prototype.Ft=function(t,i,s,n){if(this.at||null!=this.bt){if(this.at){if(!(i instanceof h.AnimationGroup))return;null!=i&&(t.ag=i,t.exist=!0)}else{if(null==this.bt.getAnimationRange(t.name))return void(t.exist=!1);t.exist=!0,null!=i&&(t.name=i)}null!=n&&(t.loop=n),null!=s&&(t.rate=s)}},t.prototype.enableBlending=function(t){if(this.at)for(var i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];if(n instanceof u&&n.exist)for(var e=0,c=n.ag.targetedAnimations;e<c.length;e++){var o=c[e];o.animation.enableBlending=!0,o.animation.blendingSpeed=t}}else this.bt.enableBlending(t)},t.prototype.disableBlending=function(){if(this.at)for(var t=0,i=Object.keys(this.F);t<i.length;t++){var s=i[t],h=this.F[s];if(h instanceof u&&h.exist)for(var n=0,e=h.ag.targetedAnimations;n<e.length;n++){e[n].animation.enableBlending=!1}}},t.prototype.setWalkAnim=function(t,i,s){this.Ft(this.F.walk,t,i,s)},t.prototype.setRunAnim=function(t,i,s){this.Ft(this.F.run,t,i,s)},t.prototype.setWalkBackAnim=function(t,i,s){this.Ft(this.F.walkBack,t,i,s),this.Lt(this.F.walkBackFast,this.F.walkBack)},t.prototype.setWalkBackFastAnim=function(t,i,s){this.Ft(this.F.walkBackFast,t,i,s)},t.prototype.setSlideBackAnim=function(t,i,s){this.Ft(this.F.slideBack,t,i,s)},t.prototype.setIdleAnim=function(t,i,s){this.Ft(this.F.idle,t,i,s)},t.prototype.setTurnRightAnim=function(t,i,s){this.Ft(this.F.turnRight,t,i,s),this.Lt(this.F.turnRightFast,this.F.turnRight)},t.prototype.setTurnRightFastAnim=function(t,i,s){this.Ft(this.F.turnRightFast,t,i,s)},t.prototype.setTurnLeftAnim=function(t,i,s){this.Ft(this.F.turnLeft,t,i,s),this.Lt(this.F.turnLeftFast,this.F.turnLeft)},t.prototype.setTurnLeftFastAnim=function(t,i,s){this.Ft(this.F.turnLeftFast,t,i,s)},t.prototype.setStrafeRightAnim=function(t,i,s){this.Ft(this.F.strafeRight,t,i,s),this.Lt(this.F.strafeRightFast,this.F.strafeRight)},t.prototype.setStrafeRightFastAnim=function(t,i,s){this.Ft(this.F.strafeRightFast,t,i,s)},t.prototype.setStrafeLeftAnim=function(t,i,s){this.Ft(this.F.strafeLeft,t,i,s),this.Lt(this.F.strafeLeftFast,this.F.strafeLeft)},t.prototype.setStrafeLeftFastAnim=function(t,i,s){this.Ft(this.F.strafeLeftFast,t,i,s)},t.prototype.setIdleJumpAnim=function(t,i,s){this.Ft(this.F.idleJump,t,i,s)},t.prototype.setRunJumpAnim=function(t,i,s){this.Ft(this.F.runJump,t,i,s)},t.prototype.setFallAnim=function(t,i,s){this.Ft(this.F.fall,t,i,s)},t.prototype.setWalkKey=function(t){this.F.walk.key=t.toLowerCase()},t.prototype.setWalkBackKey=function(t){this.F.walkBack.key=t.toLowerCase()},t.prototype.setTurnLeftKey=function(t){this.F.turnLeft.key=t.toLowerCase()},t.prototype.setTurnRightKey=function(t){this.F.turnRight.key=t.toLowerCase()},t.prototype.setStrafeLeftKey=function(t){this.F.strafeLeft.key=t.toLowerCase()},t.prototype.setStrafeRightKey=function(t){this.F.strafeRight.key=t.toLowerCase()},t.prototype.setJumpKey=function(t){this.F.idleJump.key=t.toLowerCase()},t.prototype.setCameraElasticity=function(t){this.L=t},t.prototype.setCameraTarget=function(t){this.R.copyFrom(t)},t.prototype.cameraCollisionChanged=function(){this.nt=this.kt.checkCollisions},t.prototype.setNoFirstPerson=function(t){this.S=t},t.prototype.wt=function(t){for(var i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];n instanceof u&&(null!=t?null!=t.getAnimationRange(n.id)&&(n.name=n.id,n.exist=!0,this.lt=!0):n.exist=!1)}this.xt()},t.prototype.xt=function(){this.Lt(this.F.walkBackFast,this.F.walkBack),this.Lt(this.F.turnRightFast,this.F.turnRight),this.Lt(this.F.turnLeftFast,this.F.turnLeft),this.Lt(this.F.strafeRightFast,this.F.strafeRight),this.Lt(this.F.strafeLeftFast,this.F.strafeLeft)},t.prototype.Lt=function(t,i){t.exist||i.exist&&(t.exist=!0,t.ag=i.ag,t.name=i.name,t.rate=2*i.rate)},t.prototype.setMode=function(t){this.q=t,this.B=t},t.prototype.getMode=function(){return this.q},t.prototype.setTurningOff=function(t){this.tt=t},t.prototype.isTurningOff=function(){return this.tt},t.prototype.Rt=function(t){var i=t.getWorldMatrix(),s=h.Vector3.FromFloatArray(i.m,0),n=h.Vector3.FromFloatArray(i.m,4),e=h.Vector3.FromFloatArray(i.m,8),u=h.Vector3.Cross(s,n);h.Vector3.Dot(u,e)<0?(this.A=!0,this.J=1):(this.A=!1,this.J=-1)},t.prototype.setFaceForward=function(t){this.St=t,this.A?(this.qt=t?Math.PI/2:3*Math.PI/2,this.Bt=t?1:-1):(this.qt=t?3*Math.PI/2:Math.PI/2,this.Bt=t?-1:1)},t.prototype.isFaceForward=function(){return this.St},t.prototype.checkAGs=function(t){for(var i=0,s=Object.keys(this.F);i<s.length;i++){var h=s[i],n=this.F[h];n instanceof u&&(null!=t[n.name]&&(n.ag=t[n.name],n.exist=!0))}},t.prototype.start=function(){this._||(this._=!0,this.Mt.reset(),this.Y=0,this.it=.001,this.H=!1,this.At(),this.enableKeyBoard(!0),this.vt.registerBeforeRender(this.dt))},t.prototype.stop=function(){this._&&(this._=!1,this.vt.unregisterBeforeRender(this.dt),this.enableKeyBoard(!1),this.T=null)},t.prototype.pauseAnim=function(){this.D=!0},t.prototype.resumeAnim=function(){this.D=!1},t.prototype.Jt=function(){return h.Vector3.Dot(this._t.forward,this._t.position.subtract(this.kt.position))<0?1:-1},t.prototype.pt=function(){this.G.copyFrom(this._t.position);var t=null,i=this.vt.getEngine().getDeltaTime()/1e3;this.Mt.Dt&&!this.P?(this.H=!1,this.it=0,t=this.Tt(i)):this.anyMovement()||this.P?(this.H=!1,this.it=0,t=this.zt(i)):this.P||(t=this.Et(i)),!this.D&&this.lt&&null!=t&&this.T!==t&&(t.exist&&(this.at?(null!=this.T&&this.T.exist&&this.T.ag.stop(),t.ag.start(t.loop,t.rate)):this.bt.beginAnimation(t.name,t.loop,t.rate)),this.T=t),this.At()},t.prototype.Tt=function(t){var i=null;i=this.F.runJump,0===this.X&&(this.W=this._t.position.y),this.X=this.X+t;var s,n=0,e=0;if(1==this.q||this.tt||(this._t.rotation.y=this.qt-this.kt.alpha),this.V||this.U?(this.V?n=this.F.run.speed*t:this.U&&(n=this.F.walk.speed*t),(s=this.Gt.clone()).y=0,(s=s.normalize()).scaleToRef(n,s),e=this.Ht(this.F.runJump.speed,t),s.y=e):(e=this.Ht(this.F.idleJump.speed,t),s=new h.Vector3(0,e,0),i=this.F.idleJump),this._t.moveWithCollisions(s),e<0)if(this._t.position.y>this.G.y||this._t.position.y===this.G.y&&s.length()>.001)this.It();else if(this._t.position.y<this.W){var u=this._t.position.subtract(this.G);this.Kt(u,s,.001)?i=this.F.fall:this.Nt(u)<=this.M&&this.It()}return i},t.prototype.Ht=function(t,i){return(t-this.u*this.X)*i-.5*this.u*i*i},t.prototype.It=function(){this.Mt.Dt=!1,this.X=0,this.U=!1,this.V=!1},t.prototype.Kt=function(t,i,s){return Math.abs(t.x-i.x)<s&&Math.abs(t.y-i.y)<s&&Math.abs(t.z-i.z)<s},t.prototype.Nt=function(t){return Math.atan(Math.abs(t.y/Math.sqrt(t.x*t.x+t.z*t.z)))},t.prototype.zt=function(t){var i=this.Y*this.u;this.I=i*t+this.u*t*t/2,this.Y=this.Y+t;var s=!1,h=null;if(this.P)this.Gt.y=-this.I,s=!0;else{this.U=!1,this.V=!1;var n=void 0,e=0;switch(!0){case this.Mt.Pt:n=this.J*this.Jt(),e=this.F.strafeLeft.speed*t,this.Mt.Qt?(e=this.F.strafeLeftFast.speed*t,h=-this.Bt*n>0?this.F.strafeLeftFast:this.F.strafeRightFast):h=-this.Bt*n>0?this.F.strafeLeft:this.F.strafeRight,this.Gt=this._t.calcMovePOV(n*e,-this.I,0),s=!0;break;case this.Mt.Ut:n=-this.J*this.Jt(),e=this.F.strafeRight.speed*t,this.Mt.Qt?(e=this.F.strafeRightFast.speed*t,h=-this.Bt*n>0?this.F.strafeLeftFast:this.F.strafeRightFast):h=-this.Bt*n>0?this.F.strafeLeft:this.F.strafeRight,this.Gt=this._t.calcMovePOV(n*e,-this.I,0),s=!0;break;case this.Mt.Vt||this.tt&&0==this.q:this.Mt.Qt?(this.V=!0,e=this.F.run.speed*t,h=this.F.run):(this.U=!0,e=this.F.walk.speed*t,h=this.F.walk),this.Gt=this._t.calcMovePOV(0,-this.I,this.Bt*e),s=!0;break;case this.Mt.Wt:e=this.F.walkBack.speed*t,this.Mt.Qt?(e=this.F.walkBackFast.speed*t,h=this.F.walkBackFast):h=this.F.walkBack,this.Gt=this._t.calcMovePOV(0,-this.I,-this.Bt*e),s=!0}}if((!this.tt||0!=this.q)&&!this.Mt.Pt&&!this.Mt.Ut&&(this.Mt.Xt||this.Mt.Yt)){var u=this.F.turnLeft.speed*t;if(this.Mt.Qt&&(u*=2),1==this.q){this.$||(this.Z=-this.Bt*this.Jt(),this.A&&(this.Z=-this.Z),this.$=!0);var c=this.Z;this.Mt.Xt?this.Mt.Vt||(this.Mt.Wt?c=-this.Z:h=this.Z>0?this.F.turnRight:this.F.turnLeft):this.Mt.Vt?c=-this.Z:this.Mt.Wt||(c=-this.Z,h=this.Z>0?this.F.turnLeft:this.F.turnRight),this._t.rotation.y=this._t.rotation.y+u*c}else{c=1;this.Mt.Xt?(this.Mt.Wt&&(c=-1),s||(h=this.F.turnLeft)):(this.Mt.Vt&&(c=-1),s||(c=-1,h=this.F.turnRight)),this.kt.alpha=this.kt.alpha+u*c}}if(1!=this.q)if(this.tt)switch(!0){case this.Mt.Vt&&this.Mt.Yt:this._t.rotation.y=this.qt-this.kt.alpha+Math.PI/4;break;case this.Mt.Vt&&this.Mt.Xt:this._t.rotation.y=this.qt-this.kt.alpha-Math.PI/4;break;case this.Mt.Wt&&this.Mt.Yt:this._t.rotation.y=this.qt-this.kt.alpha+3*Math.PI/4;break;case this.Mt.Wt&&this.Mt.Xt:this._t.rotation.y=this.qt-this.kt.alpha-3*Math.PI/4;break;case this.Mt.Vt:this._t.rotation.y=this.qt-this.kt.alpha;break;case this.Mt.Wt:this._t.rotation.y=this.qt-this.kt.alpha+Math.PI;break;case this.Mt.Yt:this._t.rotation.y=this.qt-this.kt.alpha+Math.PI/2;break;case this.Mt.Xt:this._t.rotation.y=this.qt-this.kt.alpha-Math.PI/2}else this._t.rotation.y=this.qt-this.kt.alpha;if(s&&this.Gt.length()>.001)if(this._t.moveWithCollisions(this.Gt),this._t.position.y>this.G.y){var o=this._t.position.subtract(this.G),r=this.Nt(o);r>=this.j?this.O>0?(0==this.g&&this.C.copyFrom(this.G),this.g=this.g+(this._t.position.y-this.G.y),this.g>this.O&&(this.g=0,this._t.position.copyFrom(this.C),this.Zt())):(this._t.position.copyFrom(this.G),this.Zt()):(this.g=0,r>this.M?(this.N=0,this.P=!1):this.Zt())}else if(this._t.position.y<this.G.y){o=this._t.position.subtract(this.G);this.Kt(o,this.Gt,.001)?(this.P=!0,this.N++,this.N>this.K&&(h=this.F.fall)):this.Nt(o)<=this.M?this.Zt():(this.N=0,this.P=!1)}else this.Zt();return h},t.prototype.Zt=function(){this.Y=0,this.N=0,this.P=!1},t.prototype.Et=function(t){if(this.H)return this.F.idle;this.U=!1,this.V=!1,this.Y=0;var i=this.F.idle;if(this.N=0,0===t)this.I=5;else{var s=this.it*this.u;this.I=s*t+this.u*t*t/2,this.it=this.it+t}if(this.I<.01)return i;var n=new h.Vector3(0,-this.I,0);if(1==this.q||this.tt||(this._t.rotation.y=this.qt-this.kt.alpha),this._t.moveWithCollisions(n),this._t.position.y>this.G.y||this._t.position.y===this.G.y)this.$t();else if(this._t.position.y<this.G.y){var e=this._t.position.subtract(this.G);this.Kt(e,n,.001)||(this.Nt(e)<=this.M?(this.$t(),this._t.position.copyFrom(this.G)):(this.ti(),i=this.F.slideBack))}return i},t.prototype.$t=function(){this.st++,this.st>this.ht&&(this.H=!0,this.it=0)},t.prototype.ti=function(){this.H=!1,this.st=0},t.prototype.At=function(){0==this.g&&this._t.position.addToRef(this.R,this.kt.target),this.kt.radius>this.kt.lowerRadiusLimit&&this.L&&this.ii(),this.kt.radius<=this.kt.lowerRadiusLimit?this.S||this.et||(this._t.visibility=0,this.kt.checkCollisions=!1,this.B=this.q,this.q=0,this.et=!0):(this.et=!1,this.q=this.B,this._t.visibility=1,this.kt.checkCollisions=this.nt)},t.prototype.ii=function(){var t=this;this.kt.position.subtractToRef(this.kt.target,this.ct),this.ut.origin=this.kt.target,this.ut.length=this.ct.length(),this.ut.direction=this.ct.normalize();var i=this.vt.pickWithRay(this.ut,(function(i){return!(i==t._t||!i.checkCollisions)}),!0);if(i.hit)if(this.kt.checkCollisions){var s=this.kt.target.subtract(i.pickedPoint).normalize().scale(this.ot);i.pickedPoint.addToRef(s,this.kt.position)}else{var h=i.pickedPoint.subtract(this.kt.target).length();this.kt.radius=h-this.ot}},t.prototype.anyMovement=function(){return this.Mt.Vt||this.Mt.Wt||this.Mt.Xt||this.Mt.Yt||this.Mt.Pt||this.Mt.Ut},t.prototype.gt=function(t){if(t.key&&!t.repeat){switch(t.key.toLowerCase()){case this.F.idleJump.key:this.Mt.Dt=!0;break;case"capslock":this.Mt.Qt=!this.Mt.Qt;break;case"shift":this.Mt.Qt=!0;break;case"up":case"arrowup":case this.F.walk.key:this.Mt.Vt=!0;break;case"left":case"arrowleft":case this.F.turnLeft.key:this.Mt.Xt=!0;break;case"right":case"arrowright":case this.F.turnRight.key:this.Mt.Yt=!0;break;case"down":case"arrowdown":case this.F.walkBack.key:this.Mt.Wt=!0;break;case this.F.strafeLeft.key:this.Mt.Pt=!0;break;case this.F.strafeRight.key:this.Mt.Ut=!0}this.ft=this.anyMovement()}},t.prototype.yt=function(t){if(t.key){switch(t.key.toLowerCase()){case"shift":this.Mt.Qt=!1;break;case"up":case"arrowup":case this.F.walk.key:this.Mt.Vt=!1;break;case"left":case"arrowleft":case this.F.turnLeft.key:this.Mt.Xt=!1,this.$=!1;break;case"right":case"arrowright":case this.F.turnRight.key:this.Mt.Yt=!1,this.$=!1;break;case"down":case"arrowdown":case this.F.walkBack.key:this.Mt.Wt=!1;break;case this.F.strafeLeft.key:this.Mt.Pt=!1;break;case this.F.strafeRight.key:this.Mt.Ut=!1}this.ft=this.anyMovement()}},t.prototype.enableKeyBoard=function(t){this.Ct=t;var i=this.vt.getEngine().getRenderingCanvas();t?(i.addEventListener("keyup",this.jt,!1),i.addEventListener("keydown",this.Ot,!1)):(i.removeEventListener("keyup",this.jt,!1),i.removeEventListener("keydown",this.Ot,!1))},t.prototype.walk=function(t){this.Mt.Vt=t},t.prototype.walkBack=function(t){this.Mt.Wt=t},t.prototype.walkBackFast=function(t){this.Mt.Wt=t,this.Mt.Qt=t},t.prototype.run=function(t){this.Mt.Vt=t,this.Mt.Qt=t},t.prototype.turnLeft=function(t){this.Mt.Xt=t,t||(this.$=t)},t.prototype.turnLeftFast=function(t){this.Mt.Xt=t,t||(this.$=t),this.Mt.Qt=t},t.prototype.turnRight=function(t){this.Mt.Yt=t,t||(this.$=t)},t.prototype.turnRightFast=function(t){this.Mt.Yt=t,t||(this.$=t),this.Mt.Qt=t},t.prototype.strafeLeft=function(t){this.Mt.Pt=t},t.prototype.strafeLeftFast=function(t){this.Mt.Pt=t,this.Mt.Qt=t},t.prototype.strafeRight=function(t){this.Mt.Ut=t},t.prototype.strafeRightFast=function(t){this.Mt.Ut=t,this.Mt.Qt=t},t.prototype.jump=function(){this.Mt.Dt=!0},t.prototype.idle=function(){this.Mt.reset()},t.prototype.isAg=function(){return this.at},t.prototype.si=function(t){var i=this.hi(t);if(i instanceof h.Mesh&&i.skeleton)return i.skeleton;var s=i.getChildMeshes(!1,(function(t){return!!(t instanceof h.Mesh&&t.skeleton)}));return s.length>0?s[0].skeleton:null},t.prototype.hi=function(t){return null==t.parent?t:this.hi(t.parent)},t.prototype.setAvatar=function(t,i){void 0===i&&(i=!1);var s=this.hi(t);return s instanceof h.Mesh?(this._t=s,this.bt=this.si(t),null!=this.bt&&this.bt.overrideMesh?this.at=!0:this.at=!1,this.F.reset(),this.at||null==this.bt||this.wt(this.bt),this.Rt(t),this.setFaceForward(i),!0):(console.error("Cannot move this mesh. The root node of the mesh provided is not a mesh"),!1)},t.prototype.getAvatar=function(){return this._t},t.prototype.setAvatarSkeleton=function(t){this.bt=t,null!=this.bt&&this.bt.overrideMesh?this.at=!0:this.at=!1,this.at||null==this.bt||this.wt(this.bt)},t.prototype.getSkeleton=function(){return this.bt},t}(),e=function(){function t(){this.Vt=!1,this.Wt=!1,this.Yt=!1,this.Xt=!1,this.Ut=!1,this.Pt=!1,this.Dt=!1,this.Qt=!1,this.reset()}return t.prototype.reset=function(){this.Vt=!1,this.Wt=!1,this.Yt=!1,this.Xt=!1,this.Ut=!1,this.Pt=!1,this.Dt=!1,this.Qt=!1},t}(),u=function(){function t(t,i,s){void 0===i&&(i=1),this.name="",this.loop=!0,this.rate=1,this.exist=!1,this.id=t,this.speed=i,this.ds=i,this.key=s,this.dk=s}return t.prototype.reset=function(){this.name="",this.speed=this.ds,this.key=this.dk,this.loop=!0,this.rate=1,this.sound="",this.exist=!1},t}(),c=function(){function t(){this.walk=new u("walk",3,"w"),this.walkBack=new u("walkBack",1.5,"s"),this.walkBackFast=new u("walkBackFast",3,"na"),this.idle=new u("idle",0,"na"),this.idleJump=new u("idleJump",6," "),this.run=new u("run",6,"na"),this.runJump=new u("runJump",6,"na"),this.fall=new u("fall",0,"na"),this.turnLeft=new u("turnLeft",Math.PI/8,"a"),this.turnLeftFast=new u("turnLeftFast",Math.PI/4,"na"),this.turnRight=new u("turnRight",Math.PI/8,"d"),this.turnRightFast=new u("turnRightFast",Math.PI/4,"na"),this.strafeLeft=new u("strafeLeft",1.5,"q"),this.strafeLeftFast=new u("strafeLeftFast",3,"na"),this.strafeRight=new u("strafeRight",1.5,"e"),this.strafeRightFast=new u("strafeRightFast",3,"na"),this.slideBack=new u("slideBack",0,"na")}return t.prototype.reset=function(){for(var t=0,i=Object.keys(this);t<i.length;t++){var s=this[i[t]];s instanceof u&&s.reset()}},t}(),o=function(){this.cameraElastic=!0,this.cameraTarget=h.Vector3.Zero(),this.noFirstPerson=!1,this.topDown=!0,this.turningOff=!0,this.keyboard=!0}}])}));
//# sourceMappingURL=CharacterController.js.map